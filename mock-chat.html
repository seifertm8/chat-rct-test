<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Mock Chat</title>
  <style>
    body { font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial; margin: 0; background:#f6f7f9; }
    .wrap { max-width: 900px; margin: 0 auto; padding: 18px; }
    .card { background: white; border: 1px solid #e6e7eb; border-radius: 12px; padding: 14px; }
    .header { display:flex; justify-content:space-between; align-items:center; gap:12px; margin-bottom: 10px; }
    .badge { font-size:12px; color:#444; background:#eef1ff; padding:6px 10px; border-radius:999px; }
    .chat { height: 520px; overflow:auto; padding: 12px; background:#fafafa; border:1px solid #eee; border-radius: 10px; }
    .msg { margin: 10px 0; display:flex; }
    .msg.user { justify-content:flex-end; }
    .bubble { max-width: 76%; padding: 10px 12px; border-radius: 14px; line-height: 1.35; }
    .user .bubble { background:#dff1ff; border:1px solid #c8e8ff; }
    .asst .bubble { background:#ffffff; border:1px solid #e6e7eb; }
    .inputRow { display:flex; gap:10px; margin-top: 12px; }
    input { flex:1; padding: 12px; border-radius: 10px; border: 1px solid #d6d8de; }
    button { padding: 12px 14px; border-radius: 10px; border: 0; background:#111827; color:white; cursor:pointer; }
    button:disabled { opacity: .6; cursor:not-allowed; }
    .hint { font-size: 12px; color:#666; margin-top:10px; }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="card">
      <div class="header">
        <div><strong>Studien-Chat</strong></div>
        <div class="badge" id="pidBadge">pid=…</div>
      </div>

      <div class="chat" id="chat">
        <div class="msg asst"><div class="bubble">
          Hallo! Wie kann ich dir helfen?
        </div></div>
      </div>

      <div class="inputRow">
        <input id="inp" placeholder="Nachricht eingeben…" />
        <button id="send">Senden</button>
      </div>

      <div class="hint">
        Hinweis: Bitte keine personenbezogenen Daten eingeben. (Mockup – keine echte KI)
      </div>
    </div>
  </div>

  <script>
    const params = new URLSearchParams(location.search);
    const pid = params.get("pid") || "TEST";
    document.getElementById("pidBadge").textContent = "pid=" + pid;

    const chat = document.getElementById("chat");
    const inp = document.getElementById("inp");
    const send = document.getElementById("send");

    function add(role, text){
      const row = document.createElement("div");
      row.className = "msg " + (role === "user" ? "user" : "asst");
      const bubble = document.createElement("div");
      bubble.className = "bubble";
      bubble.textContent = text;
      row.appendChild(bubble);
      chat.appendChild(row);
      chat.scrollTop = chat.scrollHeight;
    }

    function mockReply(userText){
      const canned = [
    "Der durchschnittliche Stromverbrauch eines 2-Personen-Haushalts liegt bei etwa 2.500–3.500 kWh pro Jahr, abhängig von Wohnform und Gerätenutzung.",
    "Die größten Stromverbraucher im Haushalt sind oft Kühlschrank, Gefriergerät, Waschmaschine, Trockner und Unterhaltungselektronik.",
    "Beim Heizen macht die Raumtemperatur einen großen Unterschied: Eine Reduktion um 1°C kann den Heizenergieverbrauch um etwa 6 % senken.",
    "LED-Lampen verbrauchen bis zu 80 % weniger Strom als herkömmliche Glühbirnen und halten deutlich länger.",
    "Standby-Verluste können sich über das Jahr summieren. Mehrfachsteckdosen mit Schalter helfen, unnötigen Verbrauch zu vermeiden.",
    "Bei steigenden Energiepreisen lohnt sich ein Vergleich von Stromtarifen sowie die Prüfung, ob ein Wechsel möglich ist.",
    "Ein Energieausweis gibt Hinweise auf die energetische Qualität einer Wohnung oder eines Hauses.",
    "Möchtest du eher Tipps zum Stromsparen, zum Heizen oder zu den Kosten?"
      ];
      return canned[Math.floor(Math.random() * canned.length)];
    }

    send.onclick = () => {
      const t = inp.value.trim();
      if(!t) return;
      add("user", t);
      inp.value = "";
      send.disabled = true;
      setTimeout(() => {
        add("asst", mockReply(t));
        send.disabled = false;
        inp.focus();
      }, 450);
    };

    inp.addEventListener("keydown", (e) => {
      if(e.key === "Enter") send.click();
    });
  </script>
</body>
</html>
